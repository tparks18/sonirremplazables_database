{"ast":null,"code":"import React,{useEffect}from\"react\";//import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport{Link,useNavigate}from\"react-router-dom\";import{Table,Button,Row,Col}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import Loader from\"../components/Loader\";import Message from\"../components/Message\";import{listPersons,deletePerson,createPerson}from\"../actions/personActions\";import{PERSON_CREATE_RESET,PERSON_DELETE_RESET}from'../constants/personConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PersonListScreen(){//const id = useParams().id;\nvar dispatch=useDispatch();var navigate=useNavigate();var redirect=\"/login\";var personList=useSelector(function(state){return state.personList;});var loading=personList.loading,error=personList.error,persons=personList.persons;var personDelete=useSelector(function(state){return state.personDelete;});var loadingDelete=personDelete.loading,errorDelete=personDelete.error,successDelete=personDelete.success;var personCreate=useSelector(function(state){return state.personCreate;});var loadingCreate=personCreate.loading,errorCreate=personCreate.error,createdPerson=personCreate.person;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;useEffect(function(){if(!userInfo.isAdmin){navigate(redirect);}else{if(createdPerson){navigate(\"/admin/person/edit/\".concat(createdPerson._id));dispatch({type:PERSON_CREATE_RESET});}else{dispatch(listPersons());}if(successDelete){navigate(\"/admin/personlist\");dispatch({type:PERSON_DELETE_RESET});}}},[dispatch,navigate,userInfo,createdPerson,successDelete,redirect]);var deleteHandler=function deleteHandler(id){if(window.confirm(\"Are you sure you want to delete this person card?\")){dispatch(deletePerson(id));}};var createPersonHandler=function createPersonHandler(){dispatch(createPerson());};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Missing People\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsxs(Button,{className:\"my-3\",onClick:createPersonHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus me-1\"}),\"Create Person Card\"]})})]}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),errorCreate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"FIRST NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"LAST NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"GENDER\"}),/*#__PURE__*/_jsx(\"th\",{children:\"AGE LAST SEEN\"}),/*#__PURE__*/_jsx(\"th\",{children:\"HAIR\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EYES\"}),/*#__PURE__*/_jsx(\"th\",{children:\"HEIGHT\"}),/*#__PURE__*/_jsx(\"th\",{children:\"WEIGHT\"}),/*#__PURE__*/_jsx(\"th\",{children:\"LAST SEEN WEARING\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CRITICAL INFORMATION\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PROVINCE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"LAST KNOWN LOCATION\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DATE LAST SEEN\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EDIT MISSING PERSON\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:persons.map(function(person){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:person._id}),/*#__PURE__*/_jsx(\"td\",{children:person.first_name}),/*#__PURE__*/_jsx(\"td\",{children:person.last_name}),/*#__PURE__*/_jsx(\"td\",{children:person.gender}),/*#__PURE__*/_jsx(\"td\",{children:person.age_last_seen}),/*#__PURE__*/_jsx(\"td\",{children:person.hair}),/*#__PURE__*/_jsx(\"td\",{children:person.eyes}),/*#__PURE__*/_jsx(\"td\",{children:person.height}),/*#__PURE__*/_jsx(\"td\",{children:person.weight}),/*#__PURE__*/_jsx(\"td\",{children:person.last_seen_wearing}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:\"150px\",overflowY:\"auto\"},children:person.critical_information})}),/*#__PURE__*/_jsx(\"td\",{children:person.province}),/*#__PURE__*/_jsx(\"td\",{children:person.last_known_location}),/*#__PURE__*/_jsx(\"td\",{children:person.date_last_seen}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/person/edit/\".concat(person._id),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(person._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},person._id);})})]})]});};export default PersonListScreen;","map":{"version":3,"names":["React","useEffect","Link","useNavigate","Table","Button","Row","Col","useDispatch","useSelector","Loader","Message","listPersons","deletePerson","createPerson","PERSON_CREATE_RESET","PERSON_DELETE_RESET","PersonListScreen","dispatch","navigate","redirect","personList","state","loading","error","persons","personDelete","loadingDelete","errorDelete","successDelete","success","personCreate","loadingCreate","errorCreate","createdPerson","person","userLogin","userInfo","isAdmin","_id","type","deleteHandler","id","window","confirm","createPersonHandler","map","first_name","last_name","gender","age_last_seen","hair","eyes","height","weight","last_seen_wearing","maxHeight","overflowY","critical_information","province","last_known_location","date_last_seen"],"sources":["/Users/tatyanaparks/Desktop/fullstack_database/frontend/src/screens/PersonListScreen.js"],"sourcesContent":["import React, { useEffect } from \"react\";\n//import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport { Link, useNavigate} from \"react-router-dom\";\nimport { Table, Button, Row, Col } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Loader from \"../components/Loader\";\nimport Message from \"../components/Message\";\nimport { listPersons, deletePerson, createPerson } from \"../actions/personActions\";\nimport { PERSON_CREATE_RESET, PERSON_DELETE_RESET } from '../constants/personConstants'\n\nfunction PersonListScreen() {\n //const id = useParams().id;\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const redirect = \"/login\";\n\n  \n  const personList = useSelector((state) => state.personList);\n  const { loading, error, persons } = personList;\n\n  const personDelete = useSelector((state) => state.personDelete);\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete,\n  } = personDelete;\n\n  const personCreate = useSelector((state) => state.personCreate);\n  const {\n    loading: loadingCreate,\n    error: errorCreate,\n    //success: successCreate,\n    person: createdPerson\n  } = personCreate;\n\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n\nuseEffect(() => {\n  if (!userInfo.isAdmin) {\n    navigate(redirect);\n  } else {\n    if (createdPerson) {\n      navigate(`/admin/person/edit/${createdPerson._id}`);\n      dispatch({ type: PERSON_CREATE_RESET });\n    } else {\n      dispatch(listPersons());\n    }\n\n    if (successDelete) {\n      navigate(\"/admin/personlist\");\n      dispatch({ type: PERSON_DELETE_RESET });\n    }\n  }\n}, [dispatch, navigate, userInfo, createdPerson, successDelete, redirect]);\n\n\n\nconst deleteHandler = (id) => {\n  if (window.confirm(\"Are you sure you want to delete this person card?\")) {\n    dispatch(deletePerson(id));\n  }\n};\n\nconst createPersonHandler = () => {\n  dispatch(createPerson());\n};\n\n\n    return (\n      <div>\n        <Row className=\"align-items-center\">\n          <Col>\n            <h1>Missing People</h1>\n          </Col>\n\n          <Col className=\"text-right\">\n            <Button className=\"my-3\" onClick={createPersonHandler}>\n              <i className=\"fas fa-plus me-1\"></i>Create Person Card\n            </Button>\n          </Col>\n        </Row>\n\n        {loadingDelete && <Loader />}\n        {errorDelete && <Message variant='danger'>{errorDelete}</Message>}\n\n        {loadingCreate && <Loader />}\n        {errorCreate && <Message variant='danger'>{errorCreate}</Message>}\n\n        {loading ? (\n          <Loader />\n        ) : error ? (\n          <Message variant=\"danger\">{error}</Message>\n        ) : (\n          <Table striped bordered hover responsive className=\"table-sm\">\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>FIRST NAME</th>\n                <th>LAST NAME</th>\n                <th>GENDER</th>\n                <th>AGE LAST SEEN</th>\n                <th>HAIR</th>\n                <th>EYES</th>\n                <th>HEIGHT</th>\n                <th>WEIGHT</th>\n                <th>LAST SEEN WEARING</th>\n                <th>CRITICAL INFORMATION</th>\n                <th>PROVINCE</th>\n                <th>LAST KNOWN LOCATION</th>\n                <th>DATE LAST SEEN</th>\n                <th>EDIT MISSING PERSON</th>\n              </tr>\n            </thead>\n            <tbody>\n              {persons.map((person) => (\n                <tr key={person._id}>\n                  <td>{person._id}</td>\n                  <td>{person.first_name}</td>\n                  <td>{person.last_name}</td>\n                  <td>{person.gender}</td>\n                  <td>{person.age_last_seen}</td>\n                  <td>{person.hair}</td>\n                  <td>{person.eyes}</td>\n                  <td>{person.height}</td>\n                  <td>{person.weight}</td>\n                  <td>{person.last_seen_wearing}</td>\n                  <td>\n                    <div style={{ maxHeight: \"150px\", overflowY: \"auto\" }}>\n                      {person.critical_information}\n                    </div>\n                  </td>\n                  <td>{person.province}</td>\n                  <td>{person.last_known_location}</td>\n                  <td>{person.date_last_seen}</td>\n                  <td>\n                    <Link to={`/admin/person/edit/${person._id}`}>\n                      <Button variant=\"light\" className=\"btn-sm\">\n                        <i className=\"fas fa-edit\"></i>\n                      </Button>\n                    </Link>\n\n                    <Button\n                      variant=\"danger\"\n                      className=\"btn-sm\"\n                      onClick={() => deleteHandler(person._id)}\n                    >\n                      <i className=\"fas fa-trash\"></i>\n                    </Button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n        )}\n      </div>\n    );\n  };\n\n\nexport default PersonListScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}