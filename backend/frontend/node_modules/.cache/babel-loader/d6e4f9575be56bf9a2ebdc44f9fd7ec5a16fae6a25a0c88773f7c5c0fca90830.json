{"ast":null,"code":"import React,{useEffect}from\"react\";import{Link,useNavigate,useLocation}from\"react-router-dom\";import{Table,Button,Row,Col}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import Loader from\"../components/Loader\";import Message from\"../components/Message\";import PaginateAdmin from\"../components/PaginateAdmin\";import SearchBarAdmin from\"../components/SearchBarAdmin\";import{listPersons,deletePerson,createPerson}from\"../actions/personActions\";import{PERSON_CREATE_RESET,PERSON_DELETE_RESET}from\"../constants/personConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PersonListScreen(){var dispatch=useDispatch();var navigate=useNavigate();var location=useLocation();var personList=useSelector(function(state){return state.personList;});var loading=personList.loading,error=personList.error,persons=personList.persons,page=personList.page,pages=personList.pages;var personDelete=useSelector(function(state){return state.personDelete;});var loadingDelete=personDelete.loading,errorDelete=personDelete.error,successDelete=personDelete.success;var personCreate=useSelector(function(state){return state.personCreate;});var loadingCreate=personCreate.loading,errorCreate=personCreate.error,createdPerson=personCreate.person;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var keyword=new URLSearchParams(location.search).get(\"keyword\")||\"\";var pageNumber=new URLSearchParams(location.search).get(\"page\")||\"\";useEffect(function(){if(!userInfo.isAdmin){navigate(\"/login\");}else{if(createdPerson){navigate(\"/admin/person/edit/\".concat(createdPerson._id));dispatch({type:PERSON_CREATE_RESET});}else{dispatch(listPersons(keyword,pageNumber));}if(successDelete){navigate(\"/admin/personlist\");dispatch({type:PERSON_DELETE_RESET});}}},[dispatch,navigate,userInfo,createdPerson,successDelete,keyword,pageNumber]);var deleteHandler=function deleteHandler(id){if(window.confirm(\"Are you sure you want to delete this person card?\")){dispatch(deletePerson(id));}};var createPersonHandler=function createPersonHandler(){dispatch(createPerson());};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Missing People\"})}),/*#__PURE__*/_jsx(SearchBarAdmin,{}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsxs(Button,{className:\"my-3\",onClick:createPersonHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus me-1\"}),\"Create Person Card\"]})})]}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),errorCreate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"FIRST NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"LAST NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"GENDER\"}),/*#__PURE__*/_jsx(\"th\",{children:\"AGE LAST SEEN\"}),/*#__PURE__*/_jsx(\"th\",{children:\"HAIR\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EYES\"}),/*#__PURE__*/_jsx(\"th\",{children:\"HEIGHT\"}),/*#__PURE__*/_jsx(\"th\",{children:\"WEIGHT\"}),/*#__PURE__*/_jsx(\"th\",{children:\"LAST SEEN WEARING\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CRITICAL INFORMATION\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PROVINCE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"LAST KNOWN LOCATION\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DATE LAST SEEN\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EDIT MISSING PERSON\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:persons.map(function(person){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:person._id}),/*#__PURE__*/_jsx(\"td\",{children:person.first_name}),/*#__PURE__*/_jsx(\"td\",{children:person.last_name}),/*#__PURE__*/_jsx(\"td\",{children:person.gender}),/*#__PURE__*/_jsx(\"td\",{children:person.age_last_seen}),/*#__PURE__*/_jsx(\"td\",{children:person.hair}),/*#__PURE__*/_jsx(\"td\",{children:person.eyes}),/*#__PURE__*/_jsx(\"td\",{children:person.height}),/*#__PURE__*/_jsx(\"td\",{children:person.weight}),/*#__PURE__*/_jsx(\"td\",{children:person.last_seen_wearing}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:\"150px\",overflowY:\"auto\"},children:person.critical_information})}),/*#__PURE__*/_jsx(\"td\",{children:person.province}),/*#__PURE__*/_jsx(\"td\",{children:person.last_known_location}),/*#__PURE__*/_jsx(\"td\",{children:person.date_last_seen}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/person/edit/\".concat(person._id),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(person._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},person._id);})})]}),/*#__PURE__*/_jsx(PaginateAdmin,{pages:pages,page:page})]})]});}export default PersonListScreen;","map":{"version":3,"names":["React","useEffect","Link","useNavigate","useLocation","Table","Button","Row","Col","useDispatch","useSelector","Loader","Message","PaginateAdmin","SearchBarAdmin","listPersons","deletePerson","createPerson","PERSON_CREATE_RESET","PERSON_DELETE_RESET","PersonListScreen","dispatch","navigate","location","personList","state","loading","error","persons","page","pages","personDelete","loadingDelete","errorDelete","successDelete","success","personCreate","loadingCreate","errorCreate","createdPerson","person","userLogin","userInfo","keyword","URLSearchParams","search","get","pageNumber","isAdmin","_id","type","deleteHandler","id","window","confirm","createPersonHandler","map","first_name","last_name","gender","age_last_seen","hair","eyes","height","weight","last_seen_wearing","maxHeight","overflowY","critical_information","province","last_known_location","date_last_seen"],"sources":["/Users/tatyanaparks/Desktop/fullstack_database/backend/frontend/src/screens/PersonListScreen.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\nimport { Table, Button, Row, Col } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Loader from \"../components/Loader\";\nimport Message from \"../components/Message\";\nimport PaginateAdmin from \"../components/PaginateAdmin\";\nimport SearchBarAdmin from \"../components/SearchBarAdmin\";\nimport {\n  listPersons,\n  deletePerson,\n  createPerson,\n} from \"../actions/personActions\";\nimport {\n  PERSON_CREATE_RESET,\n  PERSON_DELETE_RESET,\n} from \"../constants/personConstants\";\n\nfunction PersonListScreen() {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const personList = useSelector((state) => state.personList);\n  const { loading, error, persons, page, pages } = personList;\n\n  const personDelete = useSelector((state) => state.personDelete);\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete,\n  } = personDelete;\n\n  const personCreate = useSelector((state) => state.personCreate);\n  const {\n    loading: loadingCreate,\n    error: errorCreate,\n    person: createdPerson,\n  } = personCreate;\n\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n\n  let keyword = new URLSearchParams(location.search).get(\"keyword\") || \"\";\n  let pageNumber = new URLSearchParams(location.search).get(\"page\") || \"\";\n\nuseEffect(() => {\n  if (!userInfo.isAdmin) {\n    navigate(\"/login\");\n  } else {\n    if (createdPerson) {\n      navigate(`/admin/person/edit/${createdPerson._id}`);\n      dispatch({ type: PERSON_CREATE_RESET });\n    } else {\n      dispatch(listPersons(keyword, pageNumber));\n    }\n\n    if (successDelete) {\n      navigate(\"/admin/personlist\");\n      dispatch({ type: PERSON_DELETE_RESET });\n    }\n  }\n}, [\n  dispatch,\n  navigate,\n  userInfo,\n  createdPerson,\n  successDelete,\n  keyword,\n  pageNumber,\n]);\n\n\n  const deleteHandler = (id) => {\n    if (window.confirm(\"Are you sure you want to delete this person card?\")) {\n      dispatch(deletePerson(id));\n    }\n  };\n\n  const createPersonHandler = () => {\n    dispatch(createPerson());\n  };\n\n  return (\n    <div>\n      <Row className=\"align-items-center\">\n        <Col>\n          <h1>Missing People</h1>\n        </Col>\n\n        <SearchBarAdmin />\n\n        <Col className=\"text-right\">\n          <Button className=\"my-3\" onClick={createPersonHandler}>\n            <i className=\"fas fa-plus me-1\"></i>Create Person Card\n          </Button>\n        </Col>\n      </Row>\n\n      {loadingDelete && <Loader />}\n      {errorDelete && <Message variant=\"danger\">{errorDelete}</Message>}\n\n      {loadingCreate && <Loader />}\n      {errorCreate && <Message variant=\"danger\">{errorCreate}</Message>}\n\n      {loading ? (\n        <Loader />\n      ) : error ? (\n        <Message variant=\"danger\">{error}</Message>\n      ) : (\n        <div>\n          <Table striped bordered hover responsive className=\"table-sm\">\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>FIRST NAME</th>\n                <th>LAST NAME</th>\n                <th>GENDER</th>\n                <th>AGE LAST SEEN</th>\n                <th>HAIR</th>\n                <th>EYES</th>\n                <th>HEIGHT</th>\n                <th>WEIGHT</th>\n                <th>LAST SEEN WEARING</th>\n                <th>CRITICAL INFORMATION</th>\n                <th>PROVINCE</th>\n                <th>LAST KNOWN LOCATION</th>\n                <th>DATE LAST SEEN</th>\n                <th>EDIT MISSING PERSON</th>\n              </tr>\n            </thead>\n            <tbody>\n              {persons.map((person) => (\n                <tr key={person._id}>\n                  <td>{person._id}</td>\n                  <td>{person.first_name}</td>\n                  <td>{person.last_name}</td>\n                  <td>{person.gender}</td>\n                  <td>{person.age_last_seen}</td>\n                  <td>{person.hair}</td>\n                  <td>{person.eyes}</td>\n                  <td>{person.height}</td>\n                  <td>{person.weight}</td>\n                  <td>{person.last_seen_wearing}</td>\n                  <td>\n                    <div style={{ maxHeight: \"150px\", overflowY: \"auto\" }}>\n                      {person.critical_information}\n                    </div>\n                  </td>\n                  <td>{person.province}</td>\n                  <td>{person.last_known_location}</td>\n                  <td>{person.date_last_seen}</td>\n                  <td>\n                    <Link to={`/admin/person/edit/${person._id}`}>\n                      <Button variant=\"light\" className=\"btn-sm\">\n                        <i className=\"fas fa-edit\"></i>\n                      </Button>\n                    </Link>\n\n                    <Button\n                      variant=\"danger\"\n                      className=\"btn-sm\"\n                      onClick={() => deleteHandler(person._id)}\n                    >\n                      <i className=\"fas fa-trash\"></i>\n                    </Button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n          <PaginateAdmin pages={pages} page={page} />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default PersonListScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}