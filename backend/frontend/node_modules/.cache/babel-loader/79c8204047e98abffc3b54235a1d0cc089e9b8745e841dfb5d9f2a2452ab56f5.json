{"ast":null,"code":"import _slicedToArray from\"/Users/tatyanaparks/Desktop/fullstack_database/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useReducer}from\"react\";import{Link,useLocation,useNavigate,useParams}from\"react-router-dom\";import{Form,Button,Row,Col}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import Loader from\"../components/Loader\";import Message from\"../components/Message\";import FormContainer from\"../components/FormContainer\";import{getUserDetails,updateUser}from\"../actions/userActions\";import{USER_UPDATE_RESET}from'../constants/userConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditUserScreen(){var _useParams=useParams(),id=_useParams.id;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),first_name=_useState2[0],setFirstName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),last_name=_useState4[0],setLastName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isAdmin=_useState8[0],setIsAdmin=_useState8[1];//   const location = useLocation();\nvar navigate=useNavigate();var dispatch=useDispatch();//   const redirect = location.state ? Number(location.state) : \"/\";\nvar redirect=\"/admin/userlist\";var userDetails=useSelector(function(state){return state.userDetails;});var error=userDetails.error,loading=userDetails.loading,user=userDetails.user;var userUpdate=useSelector(function(state){return state.userUpdate;});var errorUpdate=userUpdate.error,loadingUpdate=userUpdate.loading,successUpdate=userUpdate.success;useEffect(function(){if(successUpdate){dispatch({type:USER_UPDATE_RESET});navigate(redirect);}else{if(!user.first_name||!user.last_name||user._id!==Number(id)){dispatch(getUserDetails(id));}else{setFirstName(user.first_name);setLastName(user.last_name);setEmail(user.email);setIsAdmin(user.isAdmin);}}},[dispatch,user,id,successUpdate,navigate]);var submitHandler=function submitHandler(e){e.preventDefault();dispatch(updateUser({_id:user._id,first_name:first_name,last_name:last_name,email:email,isAdmin:isAdmin}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-primary\",to:\"/admin/userlist\",children:\"Go Back\"}),/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit User\"}),loadingUpdate&&/*#__PURE__*/_jsx(Loader,{}),errorUpdate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorUpdate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"firstName\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"First Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter First Name\",value:first_name,onChange:function onChange(e){return setFirstName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"lastName\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Last Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter Last Name\",value:last_name,onChange:function onChange(e){return setLastName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"isAdmin\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Admin\"}),/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",label:\"Is Admin\",checked:isAdmin,onChange:function onChange(e){return setIsAdmin(e.target.checked);}})]}),/*#__PURE__*/_jsx(Button,{className:\"mt-3\",type:\"submit\",variant:\"primary\",children:\"Update\"})]})]})]});}export default EditUserScreen;","map":{"version":3,"names":["React","useState","useEffect","useReducer","Link","useLocation","useNavigate","useParams","Form","Button","Row","Col","useDispatch","useSelector","Loader","Message","FormContainer","getUserDetails","updateUser","USER_UPDATE_RESET","EditUserScreen","id","first_name","setFirstName","last_name","setLastName","email","setEmail","isAdmin","setIsAdmin","navigate","dispatch","redirect","userDetails","state","error","loading","user","userUpdate","errorUpdate","loadingUpdate","successUpdate","success","type","_id","Number","submitHandler","e","preventDefault","target","value","checked"],"sources":["/Users/tatyanaparks/Desktop/fullstack_database/backend/frontend/src/screens/EditUserScreen.js"],"sourcesContent":["import React, { useState, useEffect, useReducer } from \"react\";\nimport { Link, useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { Form, Button, Row, Col } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Loader from \"../components/Loader\";\nimport Message from \"../components/Message\";\nimport FormContainer from \"../components/FormContainer\";\nimport { getUserDetails, updateUser } from \"../actions/userActions\";\nimport { USER_UPDATE_RESET } from '../constants/userConstants'\n\nfunction EditUserScreen() {\n\nconst { id } = useParams();\n\n  const [first_name, setFirstName] = useState(\"\");\n  const [last_name, setLastName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [isAdmin, setIsAdmin] = useState(false);\n\n//   const location = useLocation();\n   const navigate = useNavigate();\n  const dispatch = useDispatch();\n\n//   const redirect = location.state ? Number(location.state) : \"/\";\nconst redirect = \"/admin/userlist\";\n\n  const userDetails = useSelector((state) => state.userDetails);\n  const { error, loading, user } = userDetails;\n\n  const userUpdate = useSelector((state) => state.userUpdate);\n  const { error:errorUpdate, loading:loadingUpdate, success:successUpdate } = userUpdate;\n\n  useEffect(() => {\n\n    if(successUpdate){\n      dispatch({type:USER_UPDATE_RESET})\n      navigate(redirect);\n    } else {\n\n      if(!user.first_name || !user.last_name || user._id !== Number(id) ){\n        dispatch(getUserDetails(id))\n      } else {\n        setFirstName(user.first_name)\n        setLastName(user.last_name)\n        setEmail(user.email)\n        setIsAdmin(user.isAdmin)\n      }\n    }\n\n  }, [dispatch, user, id, successUpdate, navigate]);\n\n  const submitHandler = (e) => {\n    e.preventDefault()\n    dispatch(updateUser({_id:user._id, first_name, last_name, email, isAdmin }))\n  };\n\n  return (\n    <div>\n      <Link className=\"btn btn-primary\" to=\"/admin/userlist\">\n        Go Back\n      </Link>\n      <FormContainer>\n        <h1>Edit User</h1>\n        {loadingUpdate && <Loader />}\n        {errorUpdate && <Message variant=\"danger\">{errorUpdate}</Message>}\n        {loading ? (\n          <Loader />\n        ) : error ? (\n          <Message variant=\"danger\">{error}</Message>\n        ) : (\n          <Form onSubmit={submitHandler}>\n            <Form.Group controlId=\"firstName\">\n              <Form.Label>First Name</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Enter First Name\"\n                value={first_name}\n                onChange={(e) => setFirstName(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n\n            <Form.Group controlId=\"lastName\">\n              <Form.Label>Last Name</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Enter Last Name\"\n                value={last_name}\n                onChange={(e) => setLastName(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n\n            <Form.Group controlId=\"email\">\n              <Form.Label>Email Address</Form.Label>\n              <Form.Control\n                type=\"email\"\n                placeholder=\"Enter Email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              ></Form.Control>\n            </Form.Group>\n\n            <Form.Group controlId=\"isAdmin\">\n              <Form.Label>Admin</Form.Label>\n              <Form.Check\n                type=\"checkbox\"\n                label=\"Is Admin\"\n                checked={isAdmin}\n                onChange={(e) => setIsAdmin(e.target.checked)}\n              ></Form.Check>\n            </Form.Group>\n\n            <Button className=\"mt-3\" type=\"submit\" variant=\"primary\">\n              Update\n            </Button>\n          </Form>\n        )}\n      </FormContainer>\n    </div>\n  );\n}\n\nexport default EditUserScreen;\n"],"mappings":"qJAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CAC9D,OAASC,IAAI,CAAEC,WAAW,CAAEC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CAC5E,OAASC,IAAI,CAAEC,MAAM,CAAEC,GAAG,CAAEC,GAAG,KAAQ,iBAAiB,CACxD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,MAAOC,OAAM,KAAM,sBAAsB,CACzC,MAAOC,QAAO,KAAM,uBAAuB,CAC3C,MAAOC,cAAa,KAAM,6BAA6B,CACvD,OAASC,cAAc,CAAEC,UAAU,KAAQ,wBAAwB,CACnE,OAASC,iBAAiB,KAAQ,4BAA4B,yFAE9D,QAASC,eAAc,EAAG,CAE1B,eAAeb,SAAS,EAAE,CAAlBc,EAAE,YAAFA,EAAE,CAER,cAAmCpB,QAAQ,CAAC,EAAE,CAAC,wCAAxCqB,UAAU,eAAEC,YAAY,eAC/B,eAAiCtB,QAAQ,CAAC,EAAE,CAAC,yCAAtCuB,SAAS,eAAEC,WAAW,eAC7B,eAA0BxB,QAAQ,CAAC,EAAE,CAAC,yCAA/ByB,KAAK,eAAEC,QAAQ,eACtB,eAA8B1B,QAAQ,CAAC,KAAK,CAAC,yCAAtC2B,OAAO,eAAEC,UAAU,eAE5B;AACG,GAAMC,SAAQ,CAAGxB,WAAW,EAAE,CAC/B,GAAMyB,SAAQ,CAAGnB,WAAW,EAAE,CAEhC;AACA,GAAMoB,SAAQ,CAAG,iBAAiB,CAEhC,GAAMC,YAAW,CAAGpB,WAAW,CAAC,SAACqB,KAAK,QAAKA,MAAK,CAACD,WAAW,GAAC,CAC7D,GAAQE,MAAK,CAAoBF,WAAW,CAApCE,KAAK,CAAEC,OAAO,CAAWH,WAAW,CAA7BG,OAAO,CAAEC,IAAI,CAAKJ,WAAW,CAApBI,IAAI,CAE5B,GAAMC,WAAU,CAAGzB,WAAW,CAAC,SAACqB,KAAK,QAAKA,MAAK,CAACI,UAAU,GAAC,CAC3D,GAAcC,YAAW,CAAmDD,UAAU,CAA9EH,KAAK,CAAsBK,aAAa,CAA4BF,UAAU,CAA3DF,OAAO,CAAwBK,aAAa,CAAKH,UAAU,CAApCI,OAAO,CAEzDxC,SAAS,CAAC,UAAM,CAEd,GAAGuC,aAAa,CAAC,CACfV,QAAQ,CAAC,CAACY,IAAI,CAACxB,iBAAiB,CAAC,CAAC,CAClCW,QAAQ,CAACE,QAAQ,CAAC,CACpB,CAAC,IAAM,CAEL,GAAG,CAACK,IAAI,CAACf,UAAU,EAAI,CAACe,IAAI,CAACb,SAAS,EAAIa,IAAI,CAACO,GAAG,GAAKC,MAAM,CAACxB,EAAE,CAAC,CAAE,CACjEU,QAAQ,CAACd,cAAc,CAACI,EAAE,CAAC,CAAC,CAC9B,CAAC,IAAM,CACLE,YAAY,CAACc,IAAI,CAACf,UAAU,CAAC,CAC7BG,WAAW,CAACY,IAAI,CAACb,SAAS,CAAC,CAC3BG,QAAQ,CAACU,IAAI,CAACX,KAAK,CAAC,CACpBG,UAAU,CAACQ,IAAI,CAACT,OAAO,CAAC,CAC1B,CACF,CAEF,CAAC,CAAE,CAACG,QAAQ,CAAEM,IAAI,CAAEhB,EAAE,CAAEoB,aAAa,CAAEX,QAAQ,CAAC,CAAC,CAEjD,GAAMgB,cAAa,CAAG,QAAhBA,cAAa,CAAIC,CAAC,CAAK,CAC3BA,CAAC,CAACC,cAAc,EAAE,CAClBjB,QAAQ,CAACb,UAAU,CAAC,CAAC0B,GAAG,CAACP,IAAI,CAACO,GAAG,CAAEtB,UAAU,CAAVA,UAAU,CAAEE,SAAS,CAATA,SAAS,CAAEE,KAAK,CAALA,KAAK,CAAEE,OAAO,CAAPA,OAAQ,CAAC,CAAC,CAAC,CAC9E,CAAC,CAED,mBACE,oCACE,KAAC,IAAI,EAAC,SAAS,CAAC,iBAAiB,CAAC,EAAE,CAAC,iBAAiB,UAAC,SAEvD,EAAO,cACP,MAAC,aAAa,yBACZ,oBAAI,WAAS,EAAK,CACjBY,aAAa,eAAI,KAAC,MAAM,IAAG,CAC3BD,WAAW,eAAI,KAAC,OAAO,EAAC,OAAO,CAAC,QAAQ,UAAEA,WAAW,EAAW,CAChEH,OAAO,cACN,KAAC,MAAM,IAAG,CACRD,KAAK,cACP,KAAC,OAAO,EAAC,OAAO,CAAC,QAAQ,UAAEA,KAAK,EAAW,cAE3C,MAAC,IAAI,EAAC,QAAQ,CAAEW,aAAc,wBAC5B,MAAC,IAAI,CAAC,KAAK,EAAC,SAAS,CAAC,WAAW,wBAC/B,KAAC,IAAI,CAAC,KAAK,WAAC,YAAU,EAAa,cACnC,KAAC,IAAI,CAAC,OAAO,EACX,IAAI,CAAC,MAAM,CACX,WAAW,CAAC,kBAAkB,CAC9B,KAAK,CAAExB,UAAW,CAClB,QAAQ,CAAE,kBAACyB,CAAC,QAAKxB,aAAY,CAACwB,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,EAAC,EAChC,GACL,cAEb,MAAC,IAAI,CAAC,KAAK,EAAC,SAAS,CAAC,UAAU,wBAC9B,KAAC,IAAI,CAAC,KAAK,WAAC,WAAS,EAAa,cAClC,KAAC,IAAI,CAAC,OAAO,EACX,IAAI,CAAC,MAAM,CACX,WAAW,CAAC,iBAAiB,CAC7B,KAAK,CAAE1B,SAAU,CACjB,QAAQ,CAAE,kBAACuB,CAAC,QAAKtB,YAAW,CAACsB,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,EAAC,EAC/B,GACL,cAEb,MAAC,IAAI,CAAC,KAAK,EAAC,SAAS,CAAC,OAAO,wBAC3B,KAAC,IAAI,CAAC,KAAK,WAAC,eAAa,EAAa,cACtC,KAAC,IAAI,CAAC,OAAO,EACX,IAAI,CAAC,OAAO,CACZ,WAAW,CAAC,aAAa,CACzB,KAAK,CAAExB,KAAM,CACb,QAAQ,CAAE,kBAACqB,CAAC,QAAKpB,SAAQ,CAACoB,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,EAAC,EAC5B,GACL,cAEb,MAAC,IAAI,CAAC,KAAK,EAAC,SAAS,CAAC,SAAS,wBAC7B,KAAC,IAAI,CAAC,KAAK,WAAC,OAAK,EAAa,cAC9B,KAAC,IAAI,CAAC,KAAK,EACT,IAAI,CAAC,UAAU,CACf,KAAK,CAAC,UAAU,CAChB,OAAO,CAAEtB,OAAQ,CACjB,QAAQ,CAAE,kBAACmB,CAAC,QAAKlB,WAAU,CAACkB,CAAC,CAACE,MAAM,CAACE,OAAO,CAAC,EAAC,EAClC,GACH,cAEb,KAAC,MAAM,EAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAS,UAAC,QAEzD,EAAS,GAEZ,GACa,GACZ,CAEV,CAEA,cAAe/B,eAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}