{"ast":null,"code":"import _slicedToArray from\"/Users/tatyanaparks/Desktop/fullstack_database/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{Form,Button,Row,Col}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import Loader from\"../components/Loader\";import Message from\"../components/Message\";import{getUserDetails,updateUserProfile}from\"../actions/userActions\";import{USER_UPDATE_PROFILE_RESET}from'../constants/userConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProfileScreen(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),firstName=_useState2[0],setFirstName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),lastName=_useState4[0],setLastName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),confirmPassword=_useState10[0],setConfirmPassword=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),message=_useState12[0],setMessage=_useState12[1];var navigate=useNavigate();var dispatch=useDispatch();var userDetails=useSelector(function(state){return state.userDetails;});var error=userDetails.error,loading=userDetails.loading,user=userDetails.user;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userUpdateProfile=useSelector(function(state){return state.userUpdateProfile;});var success=userUpdateProfile.success;var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),fetchedUserDetails=_useState14[0],setFetchedUserDetails=_useState14[1];useEffect(function(){if(!userInfo){navigate(\"/login\");}else{if(!fetchedUserDetails||success){dispatch({type:USER_UPDATE_PROFILE_RESET});dispatch(getUserDetails(\"profile\"));setFetchedUserDetails(true);}else if(user){console.log(user);// Log the user data\nsetFirstName(user.first_name);setLastName(user.last_name);setEmail(user.email);}}},[dispatch,navigate,userInfo,user,fetchedUserDetails,success]);var submitHandler=function submitHandler(e){e.preventDefault();if(password!==confirmPassword){setMessage(\"Passwords do not match\");}else{dispatch(updateUserProfile({id:user._id,first_name:firstName,//use the state variable firstName\nlast_name:lastName,//use the state variable lastName\nemail:email,password:password}));setMessage(\"\");}};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Profile\"}),message&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:message}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"firstName\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"First Name\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",placeholder:\"Enter First Name\",value:firstName,onChange:function onChange(e){return setFirstName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"lastName\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Last Name\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"text\",placeholder:\"Enter Last Name\",value:lastName,onChange:function onChange(e){return setLastName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"email\",placeholder:\"Enter Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"confirmPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Confirm Password\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{className:\"mt-3\",type:\"submit\",variant:\"primary\",children:\"Update\"})]})]}),/*#__PURE__*/_jsx(Col,{md:9,children:/*#__PURE__*/_jsx(\"h2\",{children:\"My Uploads\"})})]});}export default ProfileScreen;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Form","Button","Row","Col","useDispatch","useSelector","Loader","Message","getUserDetails","updateUserProfile","USER_UPDATE_PROFILE_RESET","ProfileScreen","firstName","setFirstName","lastName","setLastName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","message","setMessage","navigate","dispatch","userDetails","state","error","loading","user","userLogin","userInfo","userUpdateProfile","success","fetchedUserDetails","setFetchedUserDetails","type","console","log","first_name","last_name","submitHandler","e","preventDefault","id","_id","target","value"],"sources":["/Users/tatyanaparks/Desktop/fullstack_database/frontend/src/screens/ProfileScreen.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Form, Button, Row, Col } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Loader from \"../components/Loader\";\nimport Message from \"../components/Message\";\nimport { getUserDetails, updateUserProfile } from \"../actions/userActions\";\nimport { USER_UPDATE_PROFILE_RESET } from '../constants/userConstants'\n\nfunction ProfileScreen() {\n\n    const [firstName, setFirstName] = useState(\"\");\n    const [lastName, setLastName] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [confirmPassword, setConfirmPassword] = useState(\"\");\n    const [message, setMessage] = useState(\"\");\n\n    const navigate = useNavigate();\n    const dispatch = useDispatch();\n\n    const userDetails = useSelector((state) => state.userDetails);\n    const { error, loading, user } = userDetails;\n    const userLogin = useSelector((state) => state.userLogin);\n    const { userInfo } = userLogin;\n    const userUpdateProfile = useSelector((state) => state.userUpdateProfile);\n    const { success } = userUpdateProfile;\n\n const [fetchedUserDetails, setFetchedUserDetails] = useState(false);\n\n\nuseEffect(() => {\n  if (!userInfo) {\n    navigate(\"/login\");\n  } else {\n    if (!fetchedUserDetails || success) {\n      dispatch({ type:USER_UPDATE_PROFILE_RESET })\n      dispatch(getUserDetails(\"profile\"));\n      setFetchedUserDetails(true);\n    } else if (user) {\n      console.log(user); // Log the user data\n      setFirstName(user.first_name);\n      setLastName(user.last_name);\n      setEmail(user.email);\n    }\n  }\n}, [dispatch, navigate, userInfo, user, fetchedUserDetails, success]);\n\n\n\n    const submitHandler = (e) => {\n      e.preventDefault();\n\n      if (password !== confirmPassword) {\n        setMessage(\"Passwords do not match\");\n      } else {\n        dispatch(\n          updateUserProfile({\n            id: user._id,\n            first_name: firstName, //use the state variable firstName\n            last_name: lastName, //use the state variable lastName\n            email: email,\n            password: password,\n          })\n        );\n        setMessage(\"\");\n      }\n    };\n\n  return (\n    <Row>\n      <Col md={3}>\n        <h2>User Profile</h2>\n        {message && <Message variant=\"danger\">{message}</Message>}\n        {error && <Message variant=\"danger\">{error}</Message>}\n        {loading && <Loader />}\n\n        <Form onSubmit={submitHandler}>\n          <Form.Group controlId=\"firstName\">\n            <Form.Label>First Name</Form.Label>\n            <Form.Control\n              required\n              type=\"text\"\n              placeholder=\"Enter First Name\"\n              value={firstName}\n              onChange={(e) => setFirstName(e.target.value)}\n            ></Form.Control>\n          </Form.Group>\n\n          <Form.Group controlId=\"lastName\">\n            <Form.Label>Last Name</Form.Label>\n            <Form.Control\n              required\n              type=\"text\"\n              placeholder=\"Enter Last Name\"\n              value={lastName}\n              onChange={(e) => setLastName(e.target.value)}\n            ></Form.Control>\n          </Form.Group>\n\n          <Form.Group controlId=\"email\">\n            <Form.Label>Email Address</Form.Label>\n            <Form.Control\n              required\n              type=\"email\"\n              placeholder=\"Enter Email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            ></Form.Control>\n          </Form.Group>\n\n          <Form.Group controlId=\"password\">\n            <Form.Label>Password</Form.Label>\n            <Form.Control\n              type=\"password\"\n              placeholder=\"Enter Password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            ></Form.Control>\n          </Form.Group>\n\n          <Form.Group controlId=\"confirmPassword\">\n            <Form.Label>Confirm Password</Form.Label>\n            <Form.Control\n              type=\"password\"\n              placeholder=\"Confirm Password\"\n              value={confirmPassword}\n              onChange={(e) => setConfirmPassword(e.target.value)}\n            ></Form.Control>\n          </Form.Group>\n\n          <Button className=\"mt-3\" type=\"submit\" variant=\"primary\">\n            Update\n          </Button>\n        </Form>\n      </Col>\n\n      <Col md={9}>\n        <h2>My Uploads</h2>\n      </Col>\n    </Row>\n  );\n}\n\nexport default ProfileScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}